!function(){"use strict";angular.module("app.core",["ui.router","ui.bootstrap"])}(),function(){"use strict";function e(e){e.setupConfig()}angular.module("app",["app.core","app.filters"]).run(e),e.$inject=["envConfig"]}(),function(){"use strict";function e(e,t){function a(a,s){function r(e){return e}function n(e){console.log("search failed:  "+e.data)}return e({url:t.restServiceBaseURL,method:"GET",params:{searchTerm:a.searchTerm,status:a.status,classification:a.classification,state:a.state,page:s}}).success(r).error(n)}var s={searchForRecalls:a};return s}angular.module("app").factory("dataservice",e),e.$inject=["$http","envConfig"]}(),function(){"use strict";function e(){function e(){function e(){var e=jQuery.ajax({type:"GET",url:"../config/app.config.json",cache:!1,async:!1,contentType:"application/json",dataType:"json"});200===e.status&&angular.extend(t,angular.fromJson(e.responseText))}var t={setupConfig:e};return t}this.$get=e}angular.module("app").provider("envConfig",e)}(),function(){function e(){var e,t,a,s;this.storeResultSet=function(e){t=e},this.storeSelectedItem=function(t){e=t},this.storeLastViewedPage=function(e){a=e},this.storeSearchParams=function(e){s=e},this.getResultSet=function(){return t},this.getSelectedItem=function(){return e},this.getLastViewedPage=function(){return a},this.getSearchParams=function(){return s}}angular.module("app").service("resultDataStoreService",e)}(),function(){"use strict";function e(e,t,a){t.otherwise("/search"),e.state("search",{url:"/search",templateUrl:"app/search/search.html",controllerAs:"search",controller:"SearchCtrl"}).state("foodDetails",{url:"/details",templateUrl:"app/foodDetails/foodDetails.html",controllerAs:"food",controller:"FoodDetailsCtrl"})}angular.module("app").config(e),e.$inject=["$stateProvider","$urlRouterProvider","$httpProvider"]}(),function(){"use strict";angular.module("app.filters",[])}(),function(){"use strict";function e(){function e(e,t,a){var s=e.split("");return s.splice(4,0,"-"),s.splice(7,0,"-"),s.join("")}return e}angular.module("app.filters").filter("formatResultDate",e)}(),function(){"use strict";function e(){function e(e,t,a){return isNaN(t)&&(t=100),void 0===a&&(a="..."),e.length<=t||e.length-a.length<=t?e:String(e).substring(0,t-a.length)+a}return e}angular.module("app.filters").filter("truncate",e)}(),function(){"use strict";function e(e){function t(e){var t;return"Class I"==e?t="Dangerous or Defective":"Class II"==e?t="Threat or Sickness":"Class III"==e&&(t="Labeling or Legal"),t}function a(e){var t;return"Class I"==e?t="A dangerous or defective product that predictably could cause serious health problems or death.":"Class II"==e?t="This product might cause a temporary health problem, or pose only a slight threat of a serious nature.":"Class III"==e&&(t="This product is unlikely to cause any adverse health reaction, but violates FDA labeling or manufacturing laws."),t}function s(e){var t;return"Class I"==e?t="bk-clr-one":"Class II"==e?t="bk-clr-two":"Class III"==e&&(t="bk-clr-three"),t}var r=this;r.selectedFoodItem=e.getSelectedItem(),r.getClassName=t,r.getClassDescription=a,r.getClassStyle=s}angular.module("app").controller("FoodDetailsCtrl",e),e.$inject=["resultDataStoreService"]}(),function(){"use strict";function e(e,t,a){function s(){console.log("in search controller!  doing any necessary statup logic...")}function r(){return l.pageLoading=!0,e.searchForRecalls(c,l.pagination.currentPage).then(function(e){return l.searchResults=e.data,a.storeResultSet(l.searchResults),o(),l.isCollapsed=!0,l.pageLoading=!1,l.searchResults})}function n(){a.storeSearchParams(l.searchParams),c=angular.copy(l.searchParams),l.pagination.currentPage=1,r()}function o(){var e=l.searchResults.meta.results;l.pagination.totalPages=Math.ceil(e.total/e.limit),l.pagination.totalItems=e.total}function i(){a.storeLastViewedPage(l.pagination.currentPage),r()}var c,l=this;l.title="SearchCtrl",l.isCollapsed=!1,l.pageLoading=!1,l.searchParams=a.getSearchParams(),l.searchParams?c=angular.copy(l.searchParams):l.searchParams={searchTerm:"",status:"",classification:"",state:""},l.stateList=t.recallLookups.stateLookups,l.statusList=t.recallLookups.statusLookups,l.classificationList=t.recallLookups.classificationLookups,l.pagination={currentPage:a.getLastViewedPage()||1,maxPageDisplay:5,totalPages:0,totalItems:0},l.searchResults=a.getResultSet(),l.searchResults?o():l.searchResults=[],l.search=r,l.searchClicked=n,l.setPaging=o,l.setSelectedFoodItem=a.storeSelectedItem,l.pageChanged=i,s()}angular.module("app").controller("SearchCtrl",e),e.$inject=["dataservice","envConfig","resultDataStoreService"]}();