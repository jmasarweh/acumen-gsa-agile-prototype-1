!function(){"use strict";angular.module("app.core",["ui.router","ui.bootstrap"])}(),function(){"use strict";function t(t){t.setupConfig()}angular.module("app",["app.core","app.filters"]).run(t),t.$inject=["envConfig"]}(),function(){"use strict";function t(t,e){function a(a,r){function s(t){return t}function n(t){console.log("search failed:  "+t.data)}return t({url:e.restServiceBaseURL,method:"GET",params:{searchTerm:a.searchTerm,status:a.status,classification:a.classification,state:a.state,page:r}}).success(s).error(n)}var r={searchForRecalls:a};return r}angular.module("app").factory("dataservice",t),t.$inject=["$http","envConfig"]}(),function(){"use strict";function t(){function t(){function t(){var t=jQuery.ajax({type:"GET",url:"../config/app.config.json",cache:!1,async:!1,contentType:"application/json",dataType:"json"});200===t.status&&angular.extend(e,angular.fromJson(t.responseText))}var e={setupConfig:t};return e}this.$get=t}angular.module("app").provider("envConfig",t)}(),function(){function t(){var t,e,a,r;this.storeResultSet=function(t){e=t},this.storeSelectedItem=function(e){t=e},this.storeLastViewedPage=function(t){a=t},this.storeSearchParams=function(t){r=t},this.getResultSet=function(){return e},this.getSelectedItem=function(){return t},this.getLastViewedPage=function(){return a},this.getSearchParams=function(){return r}}angular.module("app").service("resultDataStoreService",t)}(),function(){"use strict";function t(t,e,a){e.otherwise("/search"),t.state("search",{url:"/search",templateUrl:"app/search/search.html",controllerAs:"search",controller:"SearchCtrl"}).state("foodDetails",{url:"/details",templateUrl:"app/foodDetails/foodDetails.html",controllerAs:"food",controller:"FoodDetailsCtrl"})}angular.module("app").config(t),t.$inject=["$stateProvider","$urlRouterProvider","$httpProvider"]}(),function(){"use strict";angular.module("app.filters",[])}(),function(){"use strict";function t(){function t(t,e,a){return isNaN(e)&&(e=100),void 0===a&&(a="..."),t.length<=e||t.length-a.length<=e?t:String(t).substring(0,e-a.length)+a}return t}angular.module("app.filters").filter("truncate",t)}(),function(){"use strict";function t(t){function e(t){var e=t.split("");return e.splice(4,0,"-"),e.splice(7,0,"-"),e.join("")}var a=this;a.selectedFoodItem=t.getSelectedItem(),a.formatResultDate=e}angular.module("app").controller("FoodDetailsCtrl",t),t.$inject=["resultDataStoreService"]}(),function(){"use strict";function t(t,e,a){function r(){console.log("in search controller!  doing any necessary statup logic...")}function s(){return u.pageLoading=!0,console.dir(c.classification),t.searchForRecalls(c,u.pagination.currentPage).then(function(t){return u.searchResults=t.data,a.storeResultSet(u.searchResults),o(),u.pageLoading=!1,u.searchResults})}function n(){console.dir(u.searchParams.classification),a.storeSearchParams(u.searchParams),c=angular.copy(u.searchParams),u.pagination.currentPage=1,s()}function o(){var t=u.searchResults.meta.results;u.pagination.totalPages=Math.ceil(t.total/t.limit)}function i(){a.storeLastViewedPage(u.pagination.currentPage),s()}var c,u=this;u.title="SearchCtrl",u.pageLoading=!1,u.searchParams=a.getSearchParams(),u.searchParams?c=angular.copy(u.searchParams):u.searchParams={searchTerm:"",status:"",classification:"",state:""},u.stateList=e.recallLookups.stateLookups,u.statusList=e.recallLookups.statusLookups,u.classificationList=e.recallLookups.classificationLookups,u.pagination={currentPage:a.getLastViewedPage()||1,maxPageDisplay:5,totalPages:0},u.searchResults=a.getResultSet(),u.searchResults?o():u.searchResults=[],u.search=s,u.searchClicked=n,u.setPaging=o,u.setSelectedFoodItem=a.storeSelectedItem,u.pageChanged=i,r()}angular.module("app").controller("SearchCtrl",t),t.$inject=["dataservice","envConfig","resultDataStoreService"]}();